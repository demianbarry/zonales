var zUtilsJS=true;var nodeProxy="/curl_proxy.php?host=localhost&port=4000&ws_path=";var servletProxy="/curl_proxy.php?host=localhost&port=38080&ws_path=";var nodeUri="zone";var servletUri="ZCrawlSources";String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(a,c,b){return c+b.toUpperCase()})};String.prototype.trim=function(){return this.ltrim().rtrim()};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};function gup(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var d=new RegExp(a);var c=d.exec(window.location.href);if(c==null){return""}else{return c[1]}}function fixTime(a){return(a<10?"0"+a:a)}function spanishDate(c){var b=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"];var a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return fixTime(c.getHours())+":"+fixTime(c.getMinutes())+":"+fixTime(c.getSeconds())+", "+b[c.getDay()]+" "+c.getDate()+" de "+a[c.getMonth()]+" de "+c.getFullYear()}function getSolrDate(a){return a.getFullYear()+"-"+fixTime(a.getMonth())+"-"+fixTime(a.getDate())+"T"+fixTime(a.getHours())+":"+fixTime(a.getMinutes())+":"+fixTime(a.getSeconds())+"Z"}function getReadableDate(a){return fixTime(a.getDate())+"/"+fixTime(a.getMonth()+1)+"/"+a.getFullYear()+" "+fixTime(a.getHours())+":"+fixTime(a.getMinutes())+":"+fixTime(a.getSeconds())}function GetPortNumber(c){var d=c.split("/");var b=d[2].split(":");var a=b[1];return a}function GetLocalPath(a){var b=a.split("/");var c=b.slice(3).join("/");return c}function formatJson(c){var b="";var l=c;var m=0;var a=l.length;var n="&nbsp;&nbsp;&nbsp;&nbsp;";var g="<br />";var h="";for(var f=0;f<a;f++){h=l.substring(f,f+1);if(h=="}"||h=="]"){b=b+g;m=m-1;for(var e=0;e<m;e++){b=b+n}}b=b+h;if(h=="{"||h=="["||h==","){b=b+g;if(h=="{"||h=="["){m++}for(var d=0;d<m;d++){b=b+n}}}return b}function lookupGeoData(f,e,d,c){var b=new Object();var a=new Object();b.startAddress=d;a[f]="<LAT>";a[e]="<LNG>";window.geoPickerCallback=function(g){$(f).value=g.lat;$(e).value=g.lng;if(typeof c!="undefined"){users[c][1]=g.lat;users[c][2]=g.lng}switchButtons(["compilarButton"])};b.returnCallback="geoPickerCallback";myGeoPositionGeoPicker(b)}var zTags=new Array();function getAllTags(){var a=servletUri+"/getTag?name=allNames";var b=servletProxy+encodeURIComponent(a);new Request({url:b,method:"get",onSuccess:function(c){c.replace("[","").replace("]","").split(",").each(function(d){zTags.include(d.replace(/_/g," ").capitalize())})},onFailure:function(){}}).send()}var extendedStrings=new Array();function getAllExtendedStrings(){var a=nodeUri+"/getAllExtendedStrings";var b=nodeProxy+encodeURIComponent(a);new Request({url:b,method:"get",onSuccess:function(c){JSON.parse(c).each(function(d){if(d){extendedStrings.include(d.replace(/_/g," ").capitalize())}})},onFailure:function(){}}).send()}getAllExtendedStrings();function populateOptions(event,field,add,elmts,callback,fill){var container;fill=fill?fill:"";if((container=field.getNext())==null||!container.hasClass("suggestions")){container=new Element("div",{"class":"suggestions"}).inject(field,"after").setStyle("display","none");field.addEvent("blur",function(event){if(container&&!container.getElement(".selected")){container.empty();container.setStyle("display","none")}})}switch(event.keyCode){case 13:setOption(field,add,container,callback,fill);break;case 27:container.setStyle("display","none");container.empty();break;case 38:if(container.getElement(".selected")){if(container.getElement(".selected")!=container.getFirst()){var previous=container.getElement(".selected").getPrevious();container.getElement(".selected").removeClass("selected");previous.addClass("selected")}}else{if(container.childNodes.length>0){container.firstChild.addClass("selected")}}break;case 40:if(container.getElement(".selected")){if(container.getElement(".selected")!=container.getLast()){var next=container.getElement(".selected").getNext();container.getElement(".selected").removeClass("selected");next.addClass("selected")}}else{if(container.childNodes.length>0){container.firstChild.addClass("selected")}}break;default:if(event.keyCode!=8&&(event.keyCode>126||event.keyCode<32)){return}container.empty();var query=field.get("value").toLowerCase().trim();if(query.length-(add?query.lastIndexOf(typeof add==="string"?add:",")-1:0)<3){return}elmts=eval(JSON.stringify(Array.from(elmts)));Array.each(elmts,function(el){if(add&&query.lastIndexOf(typeof add==="string"?add:",")!=-1){query=query.substr(query.lastIndexOf(typeof add==="string"?add:",")+1).trim()}if(checkRegExp(el.toLowerCase(),query)){new Element("p",{html:el}).inject(container).addEvent("mouseover",function(){container.getChildren(".selected").removeClass("selected");this.addClass("selected")}).addEvent("mouseout",function(){container.getChildren(".selected").removeClass("selected")}).addEvent("click",function(){setOption(field,add,container,callback,fill)})}});if(container.childNodes.length>0){container.setStyle("display","block")}break}}function setOption(f,e,a,h,d){var c="";var b=f.get("value");if(a.getElement(".selected")){c=a.getElement(".selected").get("html").trim();if(!e){f.set("value",c)}else{e=(typeof e==="string"?e:",");var g=b.substr(0,b.lastIndexOf(e)+1).trim();f.set("value",g+c)}if(typeof h=="function"){h(f.get("value"))}}else{if(b){if(b!=d){alert("El valor seleccionado no se encuentra en la lista.")}}f.set("value",d)}a.setStyle("display","none");a.empty()}function checkRegExp(c,b){var a=new RegExp("^"+b+"| "+b,"g");return a.test(c)}function switchButtons(a){$$("input[type=submit]").each(function(b){b.setStyle("display","none")});a.each(function(b){if($(b)){$(b).setStyle("display","inline")}});if($("generateQuery")){$("generateQuery").setStyle("display","inline")}if($("volverButton")){$("volverButton").setStyle("display","inline")}}function clone(b){if(null==b||"object"!=typeof b){return b}var c=b.constructor();for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}return c};